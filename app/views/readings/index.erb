<h1>Readings</h1>
<table>
<th>
  <td>Date</td>
  <td>Indoor</td>
  <td>Outdoor</td>
</th>
<% @readings.each do |reading| %>
<tr>
  <td><%= reading.date.strftime('%d/%m/%Y %H:%M') %></td>
  <td><%= reading.indoor_temperature.to_s + "&deg;C" %></td>
  <td><%= reading.outdoor_temperature.to_s + "&deg;C" %></td>
</tr>
<% end %>
</table>
<canvas id="tempChart" width="1440" height="502" style="width: 720px; height: 251px;"></canvas>
<script>
    var ctx = document.getElementById("tempChart");
    var tempChart = new Chart(ctx, {
        type: 'line',
        animation:{
            animateScale:true
        },
        data: {
            labels: [ "<%= @readings.map(&:date).join("\", \"") %>" ],
            datasets: [
              {
                label: 'Indoor',
                data: '[ "<%= @readings.map(&:indoor_temperature).join("\", \"") %>" ]',
                fill: false,
                borderJoinStyle: 'miter',
                backgroundColor: 'rgba( 73, 174, 163, 0.2)',
                borderColor:     'rgba( 73, 174, 163, 0.2)',
                borderWidth: 1,
                showLine: true
              },
              {
                label: 'Outdoor',
                data: '[ "<%= @readings.map(&:outdoor_temperature).join("\", \"") %>"" ]',
                backgroundColor: 'rgba(  73, 174, 163, 0.2)',
                borderColor:     'rgba(  73, 174, 163, 0.2)',
                borderWidth: 1,
                showLine: true
              }
            ]
        },
        options: {
            maintainAspectRatio: false,
            scales: {
              yAxes: [{
                ticks: {
                    beginAtZero:true
                },
                min: -5,
                steps: 1,
                max: 30
              }]
            }
        }
    });
</script>
